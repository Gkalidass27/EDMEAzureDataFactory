{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "afi-edme-dev-df"
		},
		"Retail_CustomerMaster_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Retail_CustomerMaster'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=Retail_CustomerMaster"
		},
		"Retail_ProductMaster_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Retail_ProductMaster'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=Retail_ProductMaster"
		},
		"Retail_SiteMaster_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Retail_SiteMaster'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=Retail_SiteMaster"
		},
		"Sink_ReferenceMaster_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Sink_ReferenceMaster'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=@{linkedService().Database_Name}"
		},
		"Smartsheet1_apiToken": {
			"type": "secureString",
			"metadata": "Secure string for 'apiToken' of 'Smartsheet1'"
		},
		"SmartsheetLinkedinService_apiToken": {
			"type": "secureString",
			"metadata": "Secure string for 'apiToken' of 'SmartsheetLinkedinService'"
		},
		"Smartsheet_Storemasterlist_apiToken": {
			"type": "secureString",
			"metadata": "Secure string for 'apiToken' of 'Smartsheet_Storemasterlist'"
		},
		"TestFileShare123_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'TestFileShare123'"
		},
		"Wholesale_sitemaster_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'Wholesale_sitemaster'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=Wholesale_sitemaster"
		},
		"agr_cdp_func_functionKey": {
			"type": "secureString",
			"metadata": "Secure string for 'functionKey' of 'agr_cdp_func'"
		},
		"agr_multi_channel_mktg_hub_customer_dev_func_functionKey": {
			"type": "secureString",
			"metadata": "Secure string for 'functionKey' of 'agr_multi_channel_mktg_hub_customer_dev_func'"
		},
		"masterDataHubStg_accountKey": {
			"type": "secureString",
			"metadata": "Secure string for 'accountKey' of 'masterDataHubStg'"
		},
		"masterDataHub_Retail_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'masterDataHub_Retail'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-stage-sql.database.windows.net;Initial Catalog=masterDataHub_Retail"
		},
		"sandbox_zone_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sandbox_zone'"
		},
		"semarchy_repo_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'semarchy_repo'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=semarchy_repo"
		},
		"semarchy_staging_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'semarchy_staging'",
			"defaultValue": "Integrated Security=False;Encrypt=True;Connection Timeout=30;Data Source=afi-edme-semarchy-dev-sql.database.windows.net;Initial Catalog=semarchy_staging"
		},
		"test_functionKey": {
			"type": "secureString",
			"metadata": "Secure string for 'functionKey' of 'test'"
		},
		"SmartsheetRDCMasterlist_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://app.smartsheet.com/sheets/C76f2PC52VHXRfHfMPPw3m2gR85pVr5qq23Q78m1"
		},
		"agr_cdp_func_properties_typeProperties_functionAppUrl": {
			"type": "string",
			"defaultValue": "https://agr-cdp-func.azurewebsites.net"
		},
		"agr_multi_channel_mktg_hub_customer_dev_func_properties_typeProperties_functionAppUrl": {
			"type": "string",
			"defaultValue": "https://agr-multi-channel-mktg-hub-customer-dev-func.azurewebsites.net"
		},
		"edmeCosmos_properties_typeProperties_accountEndpoint": {
			"type": "string",
			"defaultValue": ""
		},
		"edmeCosmos_properties_typeProperties_database": {
			"type": "string",
			"defaultValue": ""
		},
		"masterDataHubStg_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://afimasterdatahubdevstg.dfs.core.windows.net"
		},
		"test_properties_typeProperties_functionAppUrl": {
			"type": "string",
			"defaultValue": "https://agr-cdp-func.azurewebsites.net"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/Retail_CustomerMaster')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Retail_CustomerMaster_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Retail_ProductMaster')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Retail_ProductMaster_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Retail_SiteMaster')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Retail_SiteMaster_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Sink_ReferenceMaster')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"parameters": {
					"Database_Name": {
						"type": "string"
					}
				},
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Sink_ReferenceMaster_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Smartsheet1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Smartsheet",
				"typeProperties": {
					"apiToken": {
						"type": "SecureString",
						"value": "[parameters('Smartsheet1_apiToken')]"
					},
					"encryptedCredential": "ew0KICAiVmVyc2lvbiI6ICIyMDE3LTExLTMwIiwNCiAgIlByb3RlY3Rpb25Nb2RlIjogIktleSIsDQogICJTZWNyZXRDb250ZW50VHlwZSI6ICJQbGFpbnRleHQiLA0KICAiQ3JlZGVudGlhbElkIjogIkRBVEFGQUNUT1JZQEFFOEIwMTA0LTMwN0UtNDA2OC1CNzRCLTA3NzNCNkI3NkJCNl8wMGJjYjQ2Mi0zOTE4LTQzNDgtOWRmYi0yNzE5MDRmOTUzMTkiDQp9"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SmartsheetLinkedinService')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Smartsheet",
				"typeProperties": {
					"apiToken": {
						"type": "SecureString",
						"value": "[parameters('SmartsheetLinkedinService_apiToken')]"
					},
					"encryptedCredential": "ew0KICAiVmVyc2lvbiI6ICIyMDE3LTExLTMwIiwNCiAgIlByb3RlY3Rpb25Nb2RlIjogIktleSIsDQogICJTZWNyZXRDb250ZW50VHlwZSI6ICJQbGFpbnRleHQiLA0KICAiQ3JlZGVudGlhbElkIjogIkRBVEFGQUNUT1JZQEFFOEIwMTA0LTMwN0UtNDA2OC1CNzRCLTA3NzNCNkI3NkJCNl9iOTY2M2ZmYi1mZjA1LTQ2Y2EtYjc5My0xMTc3Y2E0Yjk5MzEiDQp9"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SmartsheetRDCMasterlist')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('SmartsheetRDCMasterlist_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Anonymous"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Smartsheet_Storemasterlist')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Smartsheet",
				"typeProperties": {
					"apiToken": {
						"type": "SecureString",
						"value": "[parameters('Smartsheet_Storemasterlist_apiToken')]"
					},
					"encryptedCredential": "ew0KICAiVmVyc2lvbiI6ICIyMDE3LTExLTMwIiwNCiAgIlByb3RlY3Rpb25Nb2RlIjogIktleSIsDQogICJTZWNyZXRDb250ZW50VHlwZSI6ICJQbGFpbnRleHQiLA0KICAiQ3JlZGVudGlhbElkIjogIkRBVEFGQUNUT1JZQEFFOEIwMTA0LTMwN0UtNDA2OC1CNzRCLTA3NzNCNkI3NkJCNl8yYjNmMmQyOS0zMDEzLTRhYjctYmNlOS1lYTZiZTU5NTI5YTciDQp9"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/TestFileShare123')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureFileStorage",
				"typeProperties": {
					"connectionString": "[parameters('TestFileShare123_connectionString')]",
					"fileShare": "mcmh-file-share"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Wholesale_sitemaster')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('Wholesale_sitemaster_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/agr_cdp_func')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureFunction",
				"typeProperties": {
					"functionAppUrl": "[parameters('agr_cdp_func_properties_typeProperties_functionAppUrl')]",
					"authentication": "Anonymous",
					"functionKey": {
						"type": "SecureString",
						"value": "[parameters('agr_cdp_func_functionKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/agr_multi_channel_mktg_hub_customer_dev_func')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureFunction",
				"typeProperties": {
					"functionAppUrl": "[parameters('agr_multi_channel_mktg_hub_customer_dev_func_properties_typeProperties_functionAppUrl')]",
					"authentication": "Anonymous",
					"functionKey": {
						"type": "SecureString",
						"value": "[parameters('agr_multi_channel_mktg_hub_customer_dev_func_functionKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/edmeCosmos')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "CosmosDb",
				"typeProperties": {
					"accountEndpoint": "[parameters('edmeCosmos_properties_typeProperties_accountEndpoint')]",
					"database": "[parameters('edmeCosmos_properties_typeProperties_database')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/masterDataHubStg')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobFS",
				"typeProperties": {
					"url": "[parameters('masterDataHubStg_properties_typeProperties_url')]",
					"accountKey": {
						"type": "SecureString",
						"value": "[parameters('masterDataHubStg_accountKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/masterDataHub_Retail')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('masterDataHub_Retail_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sandbox_zone')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('sandbox_zone_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/semarchy_repo')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('semarchy_repo_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/semarchy_staging')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "semarchy_staging",
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('semarchy_staging_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/test')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureFunction",
				"typeProperties": {
					"functionAppUrl": "[parameters('test_properties_typeProperties_functionAppUrl')]",
					"authentication": "Anonymous",
					"functionKey": {
						"type": "SecureString",
						"value": "[parameters('test_functionKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Postal_code_API')]",
			"type": "Microsoft.DataFactory/factories/triggers",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"runtimeState": "Stopped",
				"type": "TumblingWindowTrigger",
				"typeProperties": {
					"frequency": "Month",
					"interval": 1,
					"startTime": "2024-09-10T06:23:00Z",
					"delay": "00:00:00",
					"maxConcurrency": 50,
					"retryPolicy": {
						"intervalInSeconds": 30
					},
					"dependsOn": []
				}
			},
			"dependsOn": []
		}
	]
}