{
	"name": "DACInc_StoreDetails_FilesToStaging",
	"properties": {
		"type": "MappingDataFlow",
		"typeProperties": {
			"sources": [
				{
					"dataset": {
						"referenceName": "DACInc_StoreDetails_JSON",
						"type": "DatasetReference"
					},
					"name": "source1"
				}
			],
			"sinks": [
				{
					"dataset": {
						"referenceName": "Semarchy_Staging_DAC_LocationPhotoURLS",
						"type": "DatasetReference"
					},
					"name": "sink1"
				}
			],
			"transformations": [
				{
					"name": "Flatten1"
				}
			],
			"script": "source(output(\n\t\tAccountID as string,\n\t\tLocationID as string,\n\t\tLocationNumber as string,\n\t\tReferenceCode as string,\n\t\tCreatedBy as string,\n\t\tModifiedBy as string,\n\t\tCreated as string,\n\t\tModified as string,\n\t\tLocationData as (KeyFields as (CSOLocationID as string, ITGAccountId as string, ITGAccountNumber as string, ITGClientId as string, ITGClientNumber as string, AgencyCode as string, {Reference Code} as string, CMR as string, {Open Holidays} as string, ManagerDescription as string, Exteriorphoto as string, primarylanguage as string, CustomerServiceHours as string, HideAddress as string, PinMarker as string, Promotion1Image as string, ChainName as string, Promotion2Image as string, ManagerName as string, AltCustomerServicePhone as string, GoogleBusinessDescription as string), DisplayPoint as (Type as string, Latitude as double, Longitude as double, VerificationType as string), BusinessStatus as string, Status as string, BusinessName as (Name as string, LongName as string, Locale as integer), BusinessDescription as (Description as string, ShortDescription as string, LongDescription as string), PrimaryAddress as (AddressLine1 as string, Locality as string, Region as string, PostalCode as string, CountryCode as string), PhoneNumbers as (PrimaryPhoneNumber as string, Landline as string, Fax as string), WebsiteURL as string, AlternateWebsiteURL as string, MediaURLs as (FacebookURL as string, InstagramURL as string), HoursOfOperationStructured as (Su as (Ranges as (StartTime as string, EndTime as string)[], State as integer), Mo as (Ranges as (StartTime as string, EndTime as string)[], State as integer), Tu as (Ranges as (StartTime as string, EndTime as string)[], State as integer), We as (Ranges as (StartTime as string, EndTime as string)[], State as integer), Th as (Ranges as (StartTime as string, EndTime as string)[], State as integer), Fr as (Ranges as (StartTime as string, EndTime as string)[], State as integer), Sa as (Ranges as (StartTime as string, EndTime as string)[], State as integer)), BusinessCategories as (Category1 as string, Category2 as string, Category3 as string, Category4 as string, Category5 as string, Category6 as string, Category7 as string, Category8 as string, Category9 as string), EmailAddress as string, PhotoURLs as (Type as string, URL as string, Name as string)[], KeywordsSpecialties as string, Products as string, Services as string, Brands as string, Tagline as string, AreasServed as string)\n\t),\n\tallowSchemaDrift: true,\n\tvalidateSchema: false,\n\tignoreNoFilesFound: false,\n\tdocumentForm: 'documentPerLine') ~> source1\nsource1 foldDown(unroll(LocationData.PhotoURLs, LocationData.PhotoURLs),\n\tmapColumn(\n\t\tType = LocationData.PhotoURLs.Type,\n\t\tURL = LocationData.PhotoURLs.URL,\n\t\tName = LocationData.PhotoURLs.Name,\n\t\tLocationNumber\n\t),\n\tskipDuplicateMapInputs: false,\n\tskipDuplicateMapOutputs: false) ~> Flatten1\nFlatten1 sink(allowSchemaDrift: true,\n\tvalidateSchema: false,\n\tdeletable:false,\n\tinsertable:true,\n\tupdateable:false,\n\tupsertable:false,\n\tformat: 'table',\n\terrorHandlingOption: 'stopOnFirstError',\n\tmapColumn(\n\t\tType,\n\t\tURL,\n\t\tName,\n\t\tLocationNumber\n\t)) ~> sink1"
		}
	}
}